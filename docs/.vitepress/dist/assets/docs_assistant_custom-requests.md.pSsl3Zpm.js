import{_ as e,c as a,o as t,aM as i}from"./chunks/framework.IHAHILrl.js";const u=JSON.parse('{"title":"Custom Requests","description":"","frontmatter":{"title":"Custom Requests","date":"2025-09-02T01:16:27.000Z"},"headers":[],"relativePath":"docs/assistant/custom-requests.md","filePath":"docs/assistant/custom-requests.md","lastUpdated":1763177628000}'),n={name:"docs/assistant/custom-requests.md"};function o(l,s,r,p,h,d){return t(),a("div",null,[...s[0]||(s[0]=[i(`<h1 id="custom-requests" tabindex="-1">Custom Requests <a class="header-anchor" href="#custom-requests" aria-label="Permalink to &quot;Custom Requests&quot;">​</a></h1><p>Custom Requests allow you to fine-tune how Kelivo communicates with AI providers, enabling use of proxies, gateways, self-hosted models, and advanced configurations.</p><h2 id="what-are-custom-requests" tabindex="-1">What are Custom Requests? <a class="header-anchor" href="#what-are-custom-requests" aria-label="Permalink to &quot;What are Custom Requests?&quot;">​</a></h2><p>Custom Requests let you modify:</p><ul><li><strong>Base URLs</strong>: Connect to alternative endpoints</li><li><strong>HTTP headers</strong>: Add authentication, routing, or metadata</li><li><strong>Request paths</strong>: Adjust API route structures</li><li><strong>Timeouts</strong>: Control how long to wait for responses</li><li><strong>Retries</strong>: Configure retry behavior for failed requests</li></ul><h2 id="why-use-custom-requests" tabindex="-1">Why Use Custom Requests? <a class="header-anchor" href="#why-use-custom-requests" aria-label="Permalink to &quot;Why Use Custom Requests?&quot;">​</a></h2><h3 id="common-use-cases" tabindex="-1">Common Use Cases <a class="header-anchor" href="#common-use-cases" aria-label="Permalink to &quot;Common Use Cases&quot;">​</a></h3><p><strong>1. Corporate Proxies</strong></p><ul><li>Route through company network infrastructure</li><li>Comply with enterprise security policies</li><li>Monitor and log API usage</li></ul><p><strong>2. API Gateways</strong></p><ul><li>Use services like Azure API Management</li><li>Add caching layers</li><li>Implement custom rate limiting</li></ul><p><strong>3. Self-Hosted Models</strong></p><ul><li>Connect to local LLMs (Ollama, LocalAI, etc.)</li><li>Use private cloud deployments</li><li>Run open-source models on your infrastructure</li></ul><p><strong>4. OpenAI-Compatible Services</strong></p><ul><li>Use providers offering OpenAI-compatible APIs</li><li>Examples: Together AI, Anyscale, Perplexity</li><li>Often cheaper or faster alternatives</li></ul><p><strong>5. Custom Authentication</strong></p><ul><li>Add organization IDs or project tokens</li><li>Implement custom auth schemes</li><li>Route to multi-tenant environments</li></ul><h2 id="base-url-configuration" tabindex="-1">Base URL Configuration <a class="header-anchor" href="#base-url-configuration" aria-label="Permalink to &quot;Base URL Configuration&quot;">​</a></h2><h3 id="what-is-a-base-url" tabindex="-1">What is a Base URL? <a class="header-anchor" href="#what-is-a-base-url" aria-label="Permalink to &quot;What is a Base URL?&quot;">​</a></h3><p>The endpoint where API requests are sent. Default examples:</p><ul><li><strong>OpenAI</strong>: <code>https://api.openai.com/v1</code></li><li><strong>Anthropic</strong>: <code>https://api.anthropic.com</code></li><li><strong>Google</strong>: <code>https://generativelanguage.googleapis.com</code></li></ul><h3 id="changing-the-base-url" tabindex="-1">Changing the Base URL <a class="header-anchor" href="#changing-the-base-url" aria-label="Permalink to &quot;Changing the Base URL&quot;">​</a></h3><ol><li><strong>Go to Settings → Providers</strong></li><li><strong>Select or create a provider</strong></li><li><strong>Find &quot;Base URL&quot; or &quot;Endpoint&quot; field</strong></li><li><strong>Enter your custom URL</strong></li><li><strong>Save</strong></li></ol><h3 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h3><p><strong>Azure OpenAI</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://YOUR-RESOURCE-NAME.openai.azure.com</span></span></code></pre></div><p><strong>Self-hosted Ollama</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://localhost:11434/v1</span></span></code></pre></div><p><strong>OpenRouter</strong> (aggregate provider):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://openrouter.ai/api/v1</span></span></code></pre></div><p><strong>Together AI</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://api.together.xyz/v1</span></span></code></pre></div><p><strong>Local development server</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://192.168.1.100:8000</span></span></code></pre></div><h3 id="path-prefixes" tabindex="-1">Path Prefixes <a class="header-anchor" href="#path-prefixes" aria-label="Permalink to &quot;Path Prefixes&quot;">​</a></h3><p>Some gateways require custom path structures:</p><p><strong>Standard OpenAI path</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/v1/chat/completions</span></span></code></pre></div><p><strong>Custom gateway path</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/my-org/openai/v1/chat/completions</span></span></code></pre></div><p>Configure path prefix in provider settings if supported.</p><h2 id="custom-headers" tabindex="-1">Custom Headers <a class="header-anchor" href="#custom-headers" aria-label="Permalink to &quot;Custom Headers&quot;">​</a></h2><h3 id="what-are-headers" tabindex="-1">What are Headers? <a class="header-anchor" href="#what-are-headers" aria-label="Permalink to &quot;What are Headers?&quot;">​</a></h3><p>HTTP headers carry metadata with requests:</p><ul><li><strong>Authentication</strong>: API keys, tokens, signatures</li><li><strong>Routing</strong>: Organization IDs, project selectors</li><li><strong>Configuration</strong>: Custom settings, flags</li><li><strong>Tracking</strong>: Request IDs, correlation tags</li></ul><h3 id="adding-custom-headers" tabindex="-1">Adding Custom Headers <a class="header-anchor" href="#adding-custom-headers" aria-label="Permalink to &quot;Adding Custom Headers&quot;">​</a></h3><ol><li><strong>Provider Settings → Advanced</strong></li><li><strong>Find &quot;Custom Headers&quot; section</strong></li><li><strong>Add headers in JSON format</strong>:<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Organization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Project&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;production&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Custom-Header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><strong>Save</strong></li></ol><h3 id="common-header-examples" tabindex="-1">Common Header Examples <a class="header-anchor" href="#common-header-examples" aria-label="Permalink to &quot;Common Header Examples&quot;">​</a></h3><p><strong>OpenAI Organization</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;OpenAI-Organization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org-xxxxxxxxxxxxx&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Azure OpenAI</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;api-key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-azure-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Custom tracking</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Request-Source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kelivo-mobile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-User-ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-123&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Authentication forwarding</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer additional-token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-API-Key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;secondary-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h3><ul><li><strong>Never commit headers to public configs</strong>: They may contain secrets</li><li><strong>Use environment-specific configs</strong>: Different keys for dev/prod</li><li><strong>Rotate credentials regularly</strong>: Update headers when keys change</li><li><strong>Limit exposure</strong>: Only add necessary headers</li></ul><h2 id="proxy-configuration" tabindex="-1">Proxy Configuration <a class="header-anchor" href="#proxy-configuration" aria-label="Permalink to &quot;Proxy Configuration&quot;">​</a></h2><h3 id="http-https-proxies" tabindex="-1">HTTP/HTTPS Proxies <a class="header-anchor" href="#http-https-proxies" aria-label="Permalink to &quot;HTTP/HTTPS Proxies&quot;">​</a></h3><p><strong>Platform-specific proxy setup</strong>:</p><p><strong>Android</strong>:</p><ul><li>Usually honors system proxy settings</li><li>Configure in Settings → WiFi → Advanced</li><li>May require app restart</li></ul><p><strong>iOS</strong>:</p><ul><li>Set proxy in WiFi network configuration</li><li>Manual or automatic (PAC file)</li><li>Applies system-wide</li></ul><p><strong>Manual proxy in Kelivo</strong> (if supported):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Proxy Host: proxy.company.com</span></span>
<span class="line"><span>Proxy Port: 8080</span></span>
<span class="line"><span>Proxy Auth: username:password (if needed)</span></span></code></pre></div><h3 id="socks-proxies" tabindex="-1">SOCKS Proxies <a class="header-anchor" href="#socks-proxies" aria-label="Permalink to &quot;SOCKS Proxies&quot;">​</a></h3><p>For advanced routing (e.g., via SSH tunnel):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>socks5://localhost:1080</span></span></code></pre></div><p>Not all apps support SOCKS. Check Kelivo documentation.</p><h3 id="certificate-pinning" tabindex="-1">Certificate Pinning <a class="header-anchor" href="#certificate-pinning" aria-label="Permalink to &quot;Certificate Pinning&quot;">​</a></h3><p>For self-signed certificates or MITM inspection:</p><ul><li>May need to trust custom CA certificates</li><li>Install cert at OS level (Android/iOS settings)</li><li>Some apps may require additional configuration</li></ul><h2 id="timeouts-retries" tabindex="-1">Timeouts &amp; Retries <a class="header-anchor" href="#timeouts-retries" aria-label="Permalink to &quot;Timeouts &amp; Retries&quot;">​</a></h2><h3 id="timeout-configuration" tabindex="-1">Timeout Configuration <a class="header-anchor" href="#timeout-configuration" aria-label="Permalink to &quot;Timeout Configuration&quot;">​</a></h3><p>Control how long to wait for API responses:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Connection Timeout: 10 seconds (establishing connection)</span></span>
<span class="line"><span>Read Timeout: 60 seconds (waiting for complete response)</span></span>
<span class="line"><span>Total Timeout: 120 seconds (overall request limit)</span></span></code></pre></div><p><strong>Recommendations</strong>:</p><ul><li><strong>Fast models</strong> (GPT-3.5, Flash): 30-60s read timeout</li><li><strong>Slow models</strong> (GPT-4, o1): 120-180s read timeout</li><li><strong>Streaming</strong>: Lower timeout OK (response starts quickly)</li></ul><p><strong>Adjust for</strong>:</p><ul><li>Network speed</li><li>Model complexity</li><li>Expected response length</li></ul><h3 id="retry-logic" tabindex="-1">Retry Logic <a class="header-anchor" href="#retry-logic" aria-label="Permalink to &quot;Retry Logic&quot;">​</a></h3><p>Configure retry behavior for transient failures:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Max Retries: 3</span></span>
<span class="line"><span>Retry Delay: 1, 2, 4 seconds (exponential backoff)</span></span>
<span class="line"><span>Retry on: 429 (rate limit), 500, 502, 503, 504 (server errors)</span></span></code></pre></div><p><strong>Best practices</strong>:</p><ul><li><strong>Always retry on 429</strong>: Rate limits are temporary</li><li><strong>Retry server errors</strong>: 5xx codes are often transient</li><li><strong>Don&#39;t retry 4xx</strong> (except 429): Client errors won&#39;t succeed on retry</li><li><strong>Use backoff</strong>: Avoid hammering the server</li></ul><h2 id="openai-compatible-apis" tabindex="-1">OpenAI-Compatible APIs <a class="header-anchor" href="#openai-compatible-apis" aria-label="Permalink to &quot;OpenAI-Compatible APIs&quot;">​</a></h2><p>Many providers offer OpenAI-compatible endpoints. You can use them by:</p><ol><li><strong>Create an OpenAI provider</strong></li><li><strong>Change the base URL</strong></li><li><strong>Use their API key</strong></li><li><strong>Select compatible models</strong></li></ol><h3 id="supported-providers" tabindex="-1">Supported Providers <a class="header-anchor" href="#supported-providers" aria-label="Permalink to &quot;Supported Providers&quot;">​</a></h3><p><strong>Together AI</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Base URL: https://api.together.xyz/v1</span></span>
<span class="line"><span>API Key: Together AI key</span></span>
<span class="line"><span>Models: Llama, Mistral, etc.</span></span></code></pre></div><p><strong>OpenRouter</strong> (aggregates many providers):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Base URL: https://openrouter.ai/api/v1</span></span>
<span class="line"><span>API Key: OpenRouter key</span></span>
<span class="line"><span>Models: Any from their catalog</span></span>
<span class="line"><span>Extra Header: {&quot;HTTP-Referer&quot;: &quot;https://kelivo.app&quot;}</span></span></code></pre></div><p><strong>Groq</strong> (fast inference):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Base URL: https://api.groq.com/openai/v1</span></span>
<span class="line"><span>API Key: Groq key</span></span>
<span class="line"><span>Models: Llama, Mixtral, etc.</span></span></code></pre></div><p><strong>Ollama</strong> (local models):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Base URL: http://localhost:11434/v1</span></span>
<span class="line"><span>API Key: (usually not needed, use &quot;ollama&quot;)</span></span>
<span class="line"><span>Models: Your pulled models</span></span></code></pre></div><p><strong>LocalAI</strong> (self-hosted):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Base URL: http://your-server:8080/v1</span></span>
<span class="line"><span>API Key: (configurable)</span></span>
<span class="line"><span>Models: Your configured models</span></span></code></pre></div><h3 id="model-name-mapping" tabindex="-1">Model Name Mapping <a class="header-anchor" href="#model-name-mapping" aria-label="Permalink to &quot;Model Name Mapping&quot;">​</a></h3><p>Some providers require exact model names:</p><ul><li>Check provider documentation</li><li>Test with a simple message</li><li>Adjust name if you get &quot;model not found&quot; errors</li></ul><p>Example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Provider model: &quot;meta-llama/Llama-2-70b-chat-hf&quot;</span></span>
<span class="line"><span>Kelivo model field: &quot;meta-llama/Llama-2-70b-chat-hf&quot;</span></span></code></pre></div><h2 id="self-hosted-models" tabindex="-1">Self-Hosted Models <a class="header-anchor" href="#self-hosted-models" aria-label="Permalink to &quot;Self-Hosted Models&quot;">​</a></h2><h3 id="running-locally-with-ollama" tabindex="-1">Running Locally with Ollama <a class="header-anchor" href="#running-locally-with-ollama" aria-label="Permalink to &quot;Running Locally with Ollama&quot;">​</a></h3><ol><li><strong>Install Ollama</strong>: <a href="https://ollama.ai" target="_blank" rel="noreferrer">https://ollama.ai</a></li><li><strong>Pull a model</strong>:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ollama</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> llama2</span></span></code></pre></div></li><li><strong>Start Ollama</strong> (runs on <a href="http://localhost:11434" target="_blank" rel="noreferrer">http://localhost:11434</a>)</li><li><strong>Configure in Kelivo</strong>: <ul><li>Base URL: <code>http://localhost:11434/v1</code></li><li>API Key: <code>ollama</code></li><li>Model: <code>llama2</code></li></ul></li></ol><h3 id="running-with-localai" tabindex="-1">Running with LocalAI <a class="header-anchor" href="#running-with-localai" aria-label="Permalink to &quot;Running with LocalAI&quot;">​</a></h3><ol><li><strong>Install LocalAI</strong>: <a href="https://localai.io" target="_blank" rel="noreferrer">https://localai.io</a></li><li><strong>Configure models</strong></li><li><strong>Start server</strong>: <code>local-ai run</code></li><li><strong>Configure in Kelivo</strong>: <ul><li>Base URL: <code>http://localhost:8080/v1</code></li><li>Models: As configured in LocalAI</li></ul></li></ol><h3 id="running-with-llama-cpp-server" tabindex="-1">Running with llama.cpp Server <a class="header-anchor" href="#running-with-llama-cpp-server" aria-label="Permalink to &quot;Running with llama.cpp Server&quot;">​</a></h3><ol><li><strong>Build llama.cpp</strong>: <a href="https://github.com/ggerganov/llama.cpp" target="_blank" rel="noreferrer">https://github.com/ggerganov/llama.cpp</a></li><li><strong>Start server</strong>:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model.gguf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span></span></code></pre></div></li><li><strong>Configure in Kelivo</strong>: <ul><li>Base URL: <code>http://localhost:8080/v1</code> (with compatibility layer)</li></ul></li></ol><h3 id="benefits-of-self-hosting" tabindex="-1">Benefits of Self-Hosting <a class="header-anchor" href="#benefits-of-self-hosting" aria-label="Permalink to &quot;Benefits of Self-Hosting&quot;">​</a></h3><ul><li><strong>Privacy</strong>: Data never leaves your network</li><li><strong>Cost</strong>: No per-token charges (just hardware)</li><li><strong>Customization</strong>: Full control over model and settings</li><li><strong>Offline</strong>: Works without internet</li></ul><h3 id="limitations" tabindex="-1">Limitations <a class="header-anchor" href="#limitations" aria-label="Permalink to &quot;Limitations&quot;">​</a></h3><ul><li><strong>Hardware requirements</strong>: Needs powerful GPU/CPU</li><li><strong>Model quality</strong>: Open models may lag behind GPT-4/Claude</li><li><strong>Maintenance</strong>: You manage updates and issues</li></ul><h2 id="advanced-scenarios" tabindex="-1">Advanced Scenarios <a class="header-anchor" href="#advanced-scenarios" aria-label="Permalink to &quot;Advanced Scenarios&quot;">​</a></h2><h3 id="multi-region-routing" tabindex="-1">Multi-Region Routing <a class="header-anchor" href="#multi-region-routing" aria-label="Permalink to &quot;Multi-Region Routing&quot;">​</a></h3><p>Route to different endpoints based on load:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Primary: https://api.provider.com</span></span>
<span class="line"><span>Fallback: https://api-eu.provider.com</span></span></code></pre></div><p>Implement via:</p><ul><li>Load balancer in front</li><li>Custom gateway logic</li><li>Multiple provider entries in Kelivo</li></ul><h3 id="request-logging" tabindex="-1">Request Logging <a class="header-anchor" href="#request-logging" aria-label="Permalink to &quot;Request Logging&quot;">​</a></h3><p>Add headers for request tracking:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Request-ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid-generated-per-request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-Session-ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;session-identifier&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;X-User-Agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Kelivo/1.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Use for:</p><ul><li>Debugging issues</li><li>Usage analytics</li><li>Cost attribution</li></ul><h3 id="a-b-testing" tabindex="-1">A/B Testing <a class="header-anchor" href="#a-b-testing" aria-label="Permalink to &quot;A/B Testing&quot;">​</a></h3><p>Create multiple providers with different configs:</p><ul><li>Provider A: GPT-4o with custom system prompt</li><li>Provider B: Claude 3.5 with different settings</li></ul><p>Test which performs better for your use cases.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="connection-failures" tabindex="-1">Connection Failures <a class="header-anchor" href="#connection-failures" aria-label="Permalink to &quot;Connection Failures&quot;">​</a></h3><p><strong>Symptoms</strong>: &quot;Cannot connect to server&quot;, timeout errors</p><p><strong>Solutions</strong>:</p><ul><li><strong>Check URL</strong>: Verify correct endpoint</li><li><strong>Test connectivity</strong>: Try curl/wget to same URL</li><li><strong>Firewall</strong>: Ensure no blocking</li><li><strong>Proxy</strong>: Verify proxy settings if used</li><li><strong>HTTPS</strong>: Check certificate validity</li></ul><p><strong>Example test</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.openai.com/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer YOUR_KEY&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;model&quot;:&quot;gpt-3.5-turbo&quot;,&quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:&quot;Hi&quot;}]}&#39;</span></span></code></pre></div><h3 id="authentication-errors" tabindex="-1">Authentication Errors <a class="header-anchor" href="#authentication-errors" aria-label="Permalink to &quot;Authentication Errors&quot;">​</a></h3><p><strong>Symptoms</strong>: &quot;Invalid API key&quot;, 401/403 errors</p><p><strong>Solutions</strong>:</p><ul><li><strong>Verify key</strong>: Copy-paste carefully, no extra spaces</li><li><strong>Check headers</strong>: Ensure auth header format matches provider</li><li><strong>Key permissions</strong>: Verify key has necessary scopes</li><li><strong>Quota</strong>: Check if you&#39;ve exceeded limits</li></ul><h3 id="model-not-found" tabindex="-1">Model Not Found <a class="header-anchor" href="#model-not-found" aria-label="Permalink to &quot;Model Not Found&quot;">​</a></h3><p><strong>Symptoms</strong>: &quot;Model does not exist&quot;, 404 errors</p><p><strong>Solutions</strong>:</p><ul><li><strong>Correct name</strong>: Check provider&#39;s model list</li><li><strong>Region</strong>: Some models only in certain regions (Azure)</li><li><strong>Access</strong>: Verify account has access to the model</li><li><strong>Case sensitivity</strong>: Match exact capitalization</li></ul><h3 id="slow-responses" tabindex="-1">Slow Responses <a class="header-anchor" href="#slow-responses" aria-label="Permalink to &quot;Slow Responses&quot;">​</a></h3><p><strong>Symptoms</strong>: Long wait times, timeouts</p><p><strong>Solutions</strong>:</p><ul><li><strong>Increase timeout</strong>: Set higher read timeout</li><li><strong>Try faster model</strong>: Use GPT-3.5 instead of GPT-4</li><li><strong>Reduce context</strong>: Shorten conversation history</li><li><strong>Check network</strong>: Test general internet speed</li><li><strong>Provider status</strong>: Check if provider has issues</li></ul><h3 id="invalid-response-format" tabindex="-1">Invalid Response Format <a class="header-anchor" href="#invalid-response-format" aria-label="Permalink to &quot;Invalid Response Format&quot;">​</a></h3><p><strong>Symptoms</strong>: Parsing errors, unexpected content</p><p><strong>Solutions</strong>:</p><ul><li><strong>Verify compatibility</strong>: Ensure endpoint is OpenAI-compatible</li><li><strong>Check model</strong>: May not support chat completion format</li><li><strong>Headers</strong>: Add required headers</li><li><strong>Logs</strong>: Check server logs if self-hosted</li></ul><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="development-vs-production" tabindex="-1">Development vs. Production <a class="header-anchor" href="#development-vs-production" aria-label="Permalink to &quot;Development vs. Production&quot;">​</a></h3><ul><li><strong>Dev</strong>: Use free tiers, test endpoints, verbose logging</li><li><strong>Prod</strong>: Paid tiers, stable endpoints, minimal logging</li></ul><h3 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h3><ul><li><strong>Use HTTPS</strong>: Never send API keys over HTTP</li><li><strong>Rotate keys</strong>: Regular rotation policy</li><li><strong>Least privilege</strong>: Minimum necessary permissions</li><li><strong>Monitor usage</strong>: Watch for anomalies</li></ul><h3 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to &quot;Performance&quot;">​</a></h3><ul><li><strong>Close endpoints</strong>: Use nearby servers for lower latency</li><li><strong>Appropriate timeouts</strong>: Balance between patience and UX</li><li><strong>Retry logic</strong>: Handle transient failures gracefully</li><li><strong>Caching</strong>: Consider caching at gateway level if applicable</li></ul><h3 id="cost-optimization" tabindex="-1">Cost Optimization <a class="header-anchor" href="#cost-optimization" aria-label="Permalink to &quot;Cost Optimization&quot;">​</a></h3><ul><li><strong>Right-size models</strong>: Use cheapest model that meets needs</li><li><strong>Request batching</strong>: If provider supports batch APIs</li><li><strong>Monitoring</strong>: Track usage to identify optimization opportunities</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li>Configure <a href="/docs/assistant/basics">Assistants</a> with custom providers</li><li>Explore <a href="/docs/assistant/mcp">MCP</a> for additional integrations</li><li>Read provider-specific guides: <a href="/docs/providers/openai">OpenAI</a>, <a href="/docs/providers/anthropic">Anthropic</a>, <a href="/docs/providers/google">Google</a></li><li>Check <a href="/docs/getting-started/faq">FAQ</a> for common issues</li></ul><p>Need help? <a href="https://github.com/Chevey339/kelivo/issues" target="_blank" rel="noreferrer">Open an issue</a> with your configuration details (redact secrets!).</p>`,167)])])}const g=e(n,[["render",o]]);export{u as __pageData,g as default};
